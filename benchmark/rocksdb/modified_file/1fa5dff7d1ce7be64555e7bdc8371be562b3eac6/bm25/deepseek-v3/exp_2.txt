修改后的函数将原来一个个分开的退出条件合并成了一条复合判断语句，以提高分支预测和代码可读性，同时降低不必要的执行开销。