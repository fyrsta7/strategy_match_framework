函数改动主要是将每个测试循环中重复构造factory对象的逻辑重构为在循环外统一创建，并通过collector.reset重置来复用相同的factory，从而简化代码结构、降低对象创建开销并提高代码可读性，同时保持测试行为一致。