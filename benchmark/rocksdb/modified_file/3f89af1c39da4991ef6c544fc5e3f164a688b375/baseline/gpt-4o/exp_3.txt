函数修改主要是将对窗口大小的重复数组索引用局部变量 kWindowSize 替换，从而简化了代码逻辑、提高了可读性和计算准确性。