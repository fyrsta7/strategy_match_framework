一句总结：该函数通过提前预留迭代器列表空间、采用简洁的范围式循环收集 mem、imm 以及文件迭代器，并统一数据收集流程，不仅提高了代码可读性，而且优化了内存分配和迭代性能。