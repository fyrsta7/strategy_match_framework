一句总结：修改后的函数将边界检查提前，确保只有在grandparent层存在时才计算范围并查找重叠文件，从而避免了不必要的操作并提高了代码鲁棒性和效率。