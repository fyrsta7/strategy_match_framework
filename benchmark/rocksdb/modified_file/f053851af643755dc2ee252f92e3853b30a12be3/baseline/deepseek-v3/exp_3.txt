一句总结：函数改为首先判断目标层级是否存在，只有满足条件时才计算范围和重叠判断，从而避免了不必要的计算并增强了边界检查和性能优化。