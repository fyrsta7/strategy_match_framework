该函数修改主要是将计算出的祖父级别存储到单独变量中，并在使用前先清空传入的数组，目的在于避免残留数据干扰及提升代码清晰度和安全性。