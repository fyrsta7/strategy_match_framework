一句总结：这次修改增加了提前越界检查和使用常量保存目标级别，使得代码逻辑更清晰、健壮，并优化了对重叠文件获取的判断流程。